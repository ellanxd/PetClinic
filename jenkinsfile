pipeline {
    agent { label 'slave' }

    stages {

        // stage('Preparando ambiente...') {
        //     steps{
        //         script {
        //             sh '''
        //                 #!/usr/bin/env bash
        //                 curl --request GET --header "PRIVATE-TOKEN: $PRIVATE_TOKEN" \
        //                 http://git.cvc.com.br/Mobile/devops/raw/develop/util.sh \
        //                 -o util.sh
        //             '''    
        //         }
        //     }
        // }

        stage('Unit test') {
            // when {
            //     not{
            //         branch 'master'
            //     }
            // }
            steps {
                echo "\n Teste unit√°rio... \n"
                script{
                    sh '''
                        #!/usr/bin/env bash
                        mvn test
                    '''
                }
            }
        }
    
    }

    post {
        always {
            echo "\n One way or another, I have finished! \n"
            deleteDir() /* clean up our workspace */
        }
    }

}